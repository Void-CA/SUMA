WHITESPACE = _{ " " | "\t" | "\r" | "\n" }

// CORRECCIÓN 1: Usar 'constraints_section' en vez de "subject to"
problem = { SOI ~ objective ~ constraints_section ~ EOI } 

// CORRECCIÓN 2: Agregar el ":" literal para que acepte "maximize:"
objective = { type_obj ~ ":" ~ expression } 

type_obj  = { "maximize" | "minimize" }

// Sección de restricciones (Esta regla estaba bien definida pero no usada)
constraints_section = { "constraints" ~ ":" ~ constraints }
constraints = { constraint+ }
constraint  = { expression ~ operator ~ expression }

// --- Matemáticas (Esto estaba bien) ---
operator   = { "<=" | ">=" | "==" | "<" | ">" }
expression = { term ~ (add_op ~ term)* }
term       = { factor ~ (mul_op ~ factor)* }
factor     = { number | ident | "(" ~ expression ~ ")" }
add_op     = { "+" | "-" }
mul_op     = { "*" | "/" }
ident      = @{ ASCII_ALPHA ~ (ASCII_ALPHANUMERIC | "_")* }
number     = @{ ASCII_DIGIT+ ~ ("." ~ ASCII_DIGIT*)? }